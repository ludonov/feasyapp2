<ion-header>
  <ion-navbar>
    <button ion-button menuToggle icon-only>
      <ion-icon name='menu'></ion-icon>
    </button>
    <ion-title>Chat</ion-title>
  </ion-navbar>
</ion-header>

  <ion-content>

    <ion-list>

      <ion-item *ngFor="let chat of globals.Chats" (click)="GoToChat(chat.$key)" [ngClass]="{'bold': chat.UnreadMessages > 0}">
          <ion-avatar item-left>
            <img src="{{chat.PhotoURL}}">
          </ion-avatar>
          <h2 [ngClass]="{'bold': chat.UnreadMessages > 0}">{{chat.DemanderUid == this.globals.UID ? chat.ShopperName : chat.DemanderName}}</h2>
          <p [ngClass]="{'bold': chat.UnreadMessages > 0}">{{chat.LastMessage == undefined ? "" : (chat.LastMessage.Type == null || chat.LastMessage.Type == 0 ? chat.LastMessage.Text : "Immagine")}}</p>
        <ion-note item-right [ngClass]="{'bold': chat.UnreadMessages > 0}">
          {{chat.LastMessage == undefined ? "" : globals.toHHMM(chat.LastMessage.timestamp)}}
        </ion-note>
      </ion-item>

</ion-list>

</ion-content>


    
